function getFileCategory(e){const t=e.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","bmp","svg","webp"].includes(t)?"Images":["mp4","avi","mov","mkv","webm"].includes(t)?"Videos":["mp3","wav","ogg","flac","aac"].includes(t)?"Audio":["pdf","doc","docx","txt","md","rtf"].includes(t)?"Documents":["zip","rar","7z","tar","gz"].includes(t)?"Archives":["js","ts","py","java","cpp","c","cs","html","css","json","xml","sh","bat"].includes(t)?"Code":"Other"}const folderInput=document.getElementById("folderInput"),arrangeBtn=document.getElementById("arrangeBtn"),statusDiv=document.getElementById("status");let files=[];folderInput.addEventListener("change",e=>{files=Array.from(e.target.files),statusDiv.textContent=files.length+" files/folders selected."}),arrangeBtn.addEventListener("click",async()=>{if(!files.length)return void(statusDiv.textContent="Please select a folder first.");statusDiv.textContent="Arranging files...";const e={};for(const t of files)if(t.webkitRelativePath){const n=getFileCategory(t.name);e[n]||(e[n]=[]),e[n].push(t)}try{const t=new((await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm")).default),n="Arranged-File-Arranger-Pro";for(const s in e){const a=t.folder(n+"/"+s);for(const t of e[s]){const e=await t.arrayBuffer();a.file(t.name,e)}}const s=await t.generateAsync({type:"blob"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=n+".zip",r.click(),statusDiv.textContent="Arranged files are ready! Download started."}catch(e){statusDiv.textContent="Error arranging files: "+e.message}});