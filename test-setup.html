<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAPI Test Setup - Auto Key Loader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            min-height: 100vh;
            font-family: 'Courier New', monospace;
        }
        .glow {
            animation: glow 2s ease-in-out infinite;
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 255, 0.5); }
            50% { box-shadow: 0 0 40px rgba(0, 255, 255, 0.8); }
        }
    </style>
</head>
<body class="p-6">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="bg-gray-900/80 backdrop-blur-lg rounded-2xl p-8 border-2 border-cyan-500 mb-6 glow">
            <h1 class="text-4xl font-bold text-cyan-400 mb-2 flex items-center gap-3">
                <i class="fa-solid fa-flask-vial"></i>
                PAPI Test Setup
            </h1>
            <p class="text-gray-300">Auto-configure test API keys for full app access</p>
        </div>

        <!-- Status Panel -->
        <div class="bg-gray-900/60 backdrop-blur-lg rounded-xl p-6 border border-cyan-500/30 mb-6">
            <h2 class="text-xl font-bold text-white mb-4">Current Status</h2>
            <div id="status" class="space-y-2 text-sm font-mono"></div>
        </div>

        <!-- Action Buttons -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <button onclick="setupTestKeys()" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105">
                <i class="fa-solid fa-wand-magic-sparkles mr-2"></i>
                Setup Test Keys
            </button>
            <button onclick="setupMasterAdmin()" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105">
                <i class="fa-solid fa-crown mr-2"></i>
                Activate Master Admin
            </button>
            <button onclick="setupAllLicenses()" class="bg-green-600 hover:bg-green-500 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105">
                <i class="fa-solid fa-certificate mr-2"></i>
                Activate All Licenses
            </button>
            <button onclick="clearAll()" class="bg-red-600 hover:bg-red-500 text-white font-bold py-4 px-6 rounded-lg transition transform hover:scale-105">
                <i class="fa-solid fa-trash mr-2"></i>
                Clear All Data
            </button>
        </div>

        <!-- Quick Links -->
        <div class="bg-gray-900/60 backdrop-blur-lg rounded-xl p-6 border border-cyan-500/30">
            <h2 class="text-xl font-bold text-white mb-4">Quick Access</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <a href="index.html" target="_blank" class="bg-blue-600 hover:bg-blue-500 text-white text-center py-3 px-4 rounded-lg transition">
                    <i class="fa-solid fa-home block mb-1"></i>
                    <span class="text-xs">Main Hub</span>
                </a>
                <a href="key-controller.html" target="_blank" class="bg-purple-600 hover:bg-purple-500 text-white text-center py-3 px-4 rounded-lg transition">
                    <i class="fa-solid fa-key block mb-1"></i>
                    <span class="text-xs">Key Controller</span>
                </a>
                <a href="ai-assistant-pro.html" target="_blank" class="bg-cyan-600 hover:bg-cyan-500 text-white text-center py-3 px-4 rounded-lg transition">
                    <i class="fa-solid fa-brain block mb-1"></i>
                    <span class="text-xs">AI Assistant</span>
                </a>
                <a href="PAPI Central.htm" target="_blank" class="bg-green-600 hover:bg-green-500 text-white text-center py-3 px-4 rounded-lg transition">
                    <i class="fa-solid fa-store block mb-1"></i>
                    <span class="text-xs">Marketplace</span>
                </a>
            </div>
        </div>

        <!-- Log Output -->
        <div class="bg-gray-900/60 backdrop-blur-lg rounded-xl p-6 border border-cyan-500/30 mt-6">
            <h2 class="text-xl font-bold text-white mb-4">Action Log</h2>
            <div id="log" class="text-xs font-mono text-gray-300 max-h-64 overflow-y-auto space-y-1"></div>
        </div>
    </div>

    <script>
        // Generate a realistic-looking test API key
        function generateTestKey(provider) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let key = '';
            
            if (provider === 'openai') {
                key = 'sk-proj-TEST_';
                for (let i = 0; i < 48; i++) {
                    key += chars.charAt(Math.floor(Math.random() * chars.length));
                }
            } else if (provider === 'claude') {
                key = 'sk-ant-api03-TEST_';
                for (let i = 0; i < 64; i++) {
                    key += chars.charAt(Math.floor(Math.random() * chars.length));
                }
            } else if (provider === 'gemini') {
                key = 'AIzaSyTEST_';
                for (let i = 0; i < 32; i++) {
                    key += chars.charAt(Math.floor(Math.random() * chars.length));
                }
            }
            
            return key;
        }

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
            const color = type === 'success' ? 'text-green-400' : type === 'error' ? 'text-red-400' : 'text-cyan-400';
            
            logDiv.innerHTML += `<div class="${color}">[${timestamp}] ${icon} ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function setupTestKeys() {
            log('Starting test key setup...');
            
            // Generate and store 4 OpenAI keys
            for (let i = 1; i <= 4; i++) {
                const key = generateTestKey('openai');
                localStorage.setItem(`openai_api_key${i}`, key);
                log(`OpenAI Key ${i} generated: ${key.substring(0, 20)}...`, 'success');
            }
            
            // Generate Claude key
            const claudeKey = generateTestKey('claude');
            localStorage.setItem('claude_api_key', claudeKey);
            log(`Claude Key generated: ${claudeKey.substring(0, 25)}...`, 'success');
            
            // Generate Gemini key
            const geminiKey = generateTestKey('gemini');
            localStorage.setItem('gemini_api_key', geminiKey);
            log(`Gemini Key generated: ${geminiKey.substring(0, 20)}...`, 'success');
            
            // Disable demo mode
            localStorage.removeItem('demo_mode');
            
            log('âœ… All test keys configured!', 'success');
            log('Apps will now use these test keys automatically', 'success');
            
            updateStatus();
        }

        function setupMasterAdmin() {
            localStorage.setItem('master_admin', 'TROY_WALKER_2026');
            log('Master Admin activated!', 'success');
            log('You now have full access to all apps', 'success');
            updateStatus();
        }

        function setupAllLicenses() {
            const licenses = [
                'papi_license',
                'ai_pro_license',
                'automation_license',
                'aegis_license',
                'aegis_gov_license',
                'callsentry_license',
                'nk_license',
                'cortex_desktop_license',
                'cortex_app_studio_license',
                'beta_license'
            ];
            
            licenses.forEach(license => {
                localStorage.setItem(license, 'active');
                log(`${license} activated`, 'success');
            });
            
            log('All licenses activated!', 'success');
            updateStatus();
        }

        function clearAll() {
            if (!confirm('Clear all test data, keys, and licenses?')) return;
            
            localStorage.clear();
            log('All data cleared', 'success');
            updateStatus();
        }

        function updateStatus() {
            const statusDiv = document.getElementById('status');
            let html = '';
            
            // Check API keys
            let openaiCount = 0;
            for (let i = 1; i <= 4; i++) {
                if (localStorage.getItem(`openai_api_key${i}`)) openaiCount++;
            }
            
            const hasClaude = !!localStorage.getItem('claude_api_key');
            const hasGemini = !!localStorage.getItem('gemini_api_key');
            const isMasterAdmin = localStorage.getItem('master_admin') === 'TROY_WALKER_2026';
            const hasPapiLicense = localStorage.getItem('papi_license') === 'active';
            
            html += `<div class="${openaiCount > 0 ? 'text-green-400' : 'text-red-400'}">
                OpenAI Keys: ${openaiCount}/4 configured
            </div>`;
            html += `<div class="${hasClaude ? 'text-green-400' : 'text-red-400'}">
                Claude Key: ${hasClaude ? 'Configured âœ“' : 'Not configured âœ—'}
            </div>`;
            html += `<div class="${hasGemini ? 'text-green-400' : 'text-red-400'}">
                Gemini Key: ${hasGemini ? 'Configured âœ“' : 'Not configured âœ—'}
            </div>`;
            html += `<div class="${isMasterAdmin ? 'text-purple-400' : 'text-gray-400'}">
                Master Admin: ${isMasterAdmin ? 'ACTIVE ðŸ‘‘' : 'Inactive'}
            </div>`;
            html += `<div class="${hasPapiLicense ? 'text-green-400' : 'text-gray-400'}">
                PAPI License: ${hasPapiLicense ? 'ACTIVE âœ“' : 'Inactive'}
            </div>`;
            
            statusDiv.innerHTML = html;
        }

        // Check status on load
        window.addEventListener('DOMContentLoaded', () => {
            updateStatus();
            log('Test Setup loaded. Ready to configure!');
            
            // Auto-detect if already configured
            const key1 = localStorage.getItem('openai_api_key1');
            if (key1 && key1.includes('TEST_')) {
                log('Test keys already detected in storage', 'success');
            }
        });
    </script>
</body>
</html>
