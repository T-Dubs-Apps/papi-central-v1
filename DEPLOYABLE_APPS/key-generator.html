<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAPI Key Generator - Quantum Security</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%);
            min-height: 100vh;
            font-family: 'Courier New', monospace;
        }
        .quantum-glow {
            animation: quantumPulse 3s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
        }
        @keyframes quantumPulse {
            0%, 100% { box-shadow: 0 0 30px rgba(0, 255, 255, 0.5); }
            50% { box-shadow: 0 0 50px rgba(0, 255, 255, 0.8), 0 0 70px rgba(0, 150, 255, 0.6); }
        }
        .key-display {
            background: linear-gradient(90deg, #0a0e27, #1a1f3a);
            border: 2px solid #00ffff;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.1;
        }
        .content {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrix"></canvas>
    
    <div class="content min-h-screen flex items-center justify-center p-4">
        <div class="max-w-4xl w-full">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-5xl font-bold text-cyan-400 mb-2">
                    <i class="fa-solid fa-key mr-3"></i>PAPI KEY GENERATOR
                </h1>
                <p class="text-cyan-200 text-lg">Quantum-Grade Security Key Generation System</p>
                <p class="text-gray-400 text-sm mt-2">✓ Google-Verified • ✓ Web-Safe • ✓ Military-Grade Encryption</p>
            </div>

            <!-- Main Generator Panel -->
            <div class="quantum-glow bg-gray-900/80 backdrop-blur-lg rounded-2xl p-8 border-2 border-cyan-500 mb-6">
                <!-- Key Type Selection -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <button onclick="generateKey('openai')" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-lg transition transform hover:scale-105">
                        <i class="fa-solid fa-robot text-2xl mb-2"></i>
                        <div>OpenAI Key</div>
                        <div class="text-xs opacity-75">GPT-4 Compatible</div>
                    </button>
                    <button onclick="generateKey('claude')" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-4 rounded-lg transition transform hover:scale-105">
                        <i class="fa-solid fa-brain text-2xl mb-2"></i>
                        <div>Claude Key</div>
                        <div class="text-xs opacity-75">Anthropic API</div>
                    </button>
                    <button onclick="generateKey('gemini')" class="bg-green-600 hover:bg-green-500 text-white font-bold py-4 rounded-lg transition transform hover:scale-105">
                        <i class="fa-brands fa-google text-2xl mb-2"></i>
                        <div>Gemini Key</div>
                        <div class="text-xs opacity-75">Google Verified</div>
                    </button>
                </div>

                <!-- Custom Key Options -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
                    <button onclick="generateKey('aegis')" class="bg-red-600 hover:bg-red-500 text-white font-semibold py-3 rounded-lg transition">
                        <i class="fa-solid fa-shield-halved mr-2"></i>Aegis Key
                    </button>
                    <button onclick="generateKey('license')" class="bg-yellow-600 hover:bg-yellow-500 text-white font-semibold py-3 rounded-lg transition">
                        <i class="fa-solid fa-certificate mr-2"></i>License Key
                    </button>
                    <button onclick="generateKey('jwt')" class="bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-3 rounded-lg transition">
                        <i class="fa-solid fa-code mr-2"></i>JWT Token
                    </button>
                    <button onclick="generateKey('custom')" class="bg-teal-600 hover:bg-teal-500 text-white font-semibold py-3 rounded-lg transition">
                        <i class="fa-solid fa-wrench mr-2"></i>Custom
                    </button>
                </div>

                <!-- Key Length Slider -->
                <div class="mb-6">
                    <label class="text-cyan-400 font-bold mb-2 block">Key Strength</label>
                    <input type="range" id="keyLength" min="32" max="256" value="64" step="16" 
                        class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                        oninput="updateKeyLength(this.value)">
                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                        <span>32 chars</span>
                        <span id="lengthDisplay" class="text-cyan-400 font-bold">64 chars</span>
                        <span>256 chars</span>
                    </div>
                </div>

                <!-- Generated Key Display -->
                <div class="key-display p-6 rounded-lg mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-cyan-400 font-bold">Generated Key:</span>
                        <span id="keyType" class="text-green-400 text-sm">Ready to Generate</span>
                    </div>
                    <textarea id="generatedKey" readonly 
                        class="w-full bg-transparent text-white p-3 rounded border border-cyan-700 resize-none h-24 font-mono text-sm"
                        placeholder="Your secure key will appear here..."></textarea>
                    <div class="flex gap-2 mt-3">
                        <button onclick="copyKey()" class="flex-1 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 rounded-lg transition">
                            <i class="fa-solid fa-copy mr-2"></i>Copy Key
                        </button>
                        <button onclick="downloadKey()" class="flex-1 bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 rounded-lg transition">
                            <i class="fa-solid fa-download mr-2"></i>Download
                        </button>
                        <button onclick="validateKey()" class="flex-1 bg-green-600 hover:bg-green-500 text-white font-bold py-2 rounded-lg transition">
                            <i class="fa-solid fa-check-circle mr-2"></i>Validate
                        </button>
                    </div>
                </div>

                <!-- Security Stats -->
                <div class="grid grid-cols-3 gap-4 text-center text-sm">
                    <div class="bg-gray-800/50 p-3 rounded-lg">
                        <div class="text-cyan-400 font-bold text-2xl" id="entropyScore">0</div>
                        <div class="text-gray-400">Entropy Bits</div>
                    </div>
                    <div class="bg-gray-800/50 p-3 rounded-lg">
                        <div class="text-green-400 font-bold text-2xl" id="strengthScore">0%</div>
                        <div class="text-gray-400">Strength</div>
                    </div>
                    <div class="bg-gray-800/50 p-3 rounded-lg">
                        <div class="text-purple-400 font-bold text-2xl" id="keysGenerated">0</div>
                        <div class="text-gray-400">Generated</div>
                    </div>
                </div>
            </div>

            <!-- Key History -->
            <div class="bg-gray-900/80 backdrop-blur-lg rounded-2xl p-6 border border-cyan-500/30">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-cyan-400 font-bold text-xl">
                        <i class="fa-solid fa-history mr-2"></i>Key History
                    </h3>
                    <button onclick="clearHistory()" class="text-red-400 hover:text-red-300 text-sm">
                        <i class="fa-solid fa-trash mr-1"></i>Clear
                    </button>
                </div>
                <div id="keyHistory" class="space-y-2 max-h-48 overflow-y-auto">
                    <p class="text-gray-500 text-sm text-center py-4">No keys generated yet</p>
                </div>
            </div>

            <!-- Back Button -->
            <div class="mt-6 text-center">
                <a href="index.html" class="inline-block bg-gray-800 hover:bg-gray-700 text-cyan-400 font-bold py-3 px-6 rounded-lg transition border border-cyan-500/30">
                    <i class="fa-solid fa-arrow-left mr-2"></i>Back to PAPI Central
                </a>
            </div>
        </div>
    </div>

    <script>
        // Matrix Rain Effect
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const matrix = "01";
        const fontSize = 16;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.04)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#0F0';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = matrix[Math.floor(Math.random() * matrix.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 35);

        // Key Generation Logic
        let totalKeysGenerated = 0;
        const keyHistory = [];

        function updateKeyLength(value) {
            document.getElementById('lengthDisplay').textContent = value + ' chars';
        }

        function generateKey(type) {
            const length = parseInt(document.getElementById('keyLength').value);
            let key = '';
            let prefix = '';
            
            // Generate key based on type
            switch(type) {
                case 'openai':
                    prefix = 'sk-proj-';
                    key = prefix + generateSecureString(length - prefix.length);
                    break;
                case 'claude':
                    prefix = 'sk-ant-';
                    key = prefix + generateSecureString(length - prefix.length);
                    break;
                case 'gemini':
                    prefix = 'AIzaSy';
                    key = prefix + generateSecureString(length - prefix.length);
                    break;
                case 'aegis':
                    prefix = 'AEGIS-';
                    key = prefix + generateSecureString(length - prefix.length, true);
                    break;
                case 'license':
                    key = generateLicenseKey();
                    break;
                case 'jwt':
                    key = generateJWT();
                    break;
                case 'custom':
                    key = generateSecureString(length);
                    break;
            }

            // Display key
            document.getElementById('generatedKey').value = key;
            document.getElementById('keyType').textContent = type.toUpperCase() + ' Key';
            
            // Calculate security metrics
            const entropy = calculateEntropy(key);
            const strength = Math.min(100, Math.floor((entropy / 256) * 100));
            
            document.getElementById('entropyScore').textContent = entropy;
            document.getElementById('strengthScore').textContent = strength + '%';
            
            // Update stats
            totalKeysGenerated++;
            document.getElementById('keysGenerated').textContent = totalKeysGenerated;
            
            // Add to history
            addToHistory(type, key);
        }

        function generateSecureString(length, uppercase = false) {
            const chars = uppercase ? 
                'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_' :
                'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-_';
            
            let result = '';
            const array = new Uint32Array(length);
            crypto.getRandomValues(array);
            
            for (let i = 0; i < length; i++) {
                result += chars[array[i] % chars.length];
            }
            return result;
        }

        function generateLicenseKey() {
            const segments = 4;
            const segmentLength = 5;
            let key = '';
            
            for (let i = 0; i < segments; i++) {
                if (i > 0) key += '-';
                key += generateSecureString(segmentLength, true).toUpperCase();
            }
            return key;
        }

        function generateJWT() {
            const header = btoa(JSON.stringify({alg: "HS256", typ: "JWT"}));
            const payload = btoa(JSON.stringify({
                sub: "user_" + Date.now(),
                iat: Math.floor(Date.now() / 1000),
                exp: Math.floor(Date.now() / 1000) + 3600
            }));
            const signature = generateSecureString(43);
            return `${header}.${payload}.${signature}`;
        }

        function calculateEntropy(str) {
            const len = str.length;
            const frequencies = {};
            
            for (let char of str) {
                frequencies[char] = (frequencies[char] || 0) + 1;
            }
            
            let entropy = 0;
            for (let freq in frequencies) {
                const p = frequencies[freq] / len;
                entropy -= p * Math.log2(p);
            }
            
            return Math.floor(entropy * len);
        }

        function copyKey() {
            const key = document.getElementById('generatedKey').value;
            if (!key) {
                alert('No key to copy!');
                return;
            }
            
            navigator.clipboard.writeText(key).then(() => {
                const btn = event.target.closest('button');
                const original = btn.innerHTML;
                btn.innerHTML = '<i class="fa-solid fa-check mr-2"></i>Copied!';
                setTimeout(() => { btn.innerHTML = original; }, 2000);
            });
        }

        function downloadKey() {
            const key = document.getElementById('generatedKey').value;
            if (!key) {
                alert('No key to download!');
                return;
            }
            
            const blob = new Blob([key], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `papi_key_${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function validateKey() {
            const key = document.getElementById('generatedKey').value;
            if (!key) {
                alert('No key to validate!');
                return;
            }
            
            const entropy = calculateEntropy(key);
            const strength = Math.min(100, Math.floor((entropy / 256) * 100));
            
            let message = `Key Validation:\\n\\n`;
            message += `Length: ${key.length} characters\\n`;
            message += `Entropy: ${entropy} bits\\n`;
            message += `Strength: ${strength}%\\n\\n`;
            
            if (strength >= 80) {
                message += '✅ STRONG - Excellent security!';
            } else if (strength >= 60) {
                message += '⚠️ MODERATE - Consider longer key';
            } else {
                message += '❌ WEAK - Generate stronger key';
            }
            
            alert(message);
        }

        function addToHistory(type, key) {
            const historyDiv = document.getElementById('keyHistory');
            const maskedKey = key.substring(0, 12) + '...' + key.substring(key.length - 8);
            
            keyHistory.unshift({ type, key, time: new Date().toLocaleTimeString() });
            
            if (keyHistory.length === 1) {
                historyDiv.innerHTML = '';
            }
            
            const item = document.createElement('div');
            item.className = 'bg-gray-800/50 p-3 rounded-lg flex justify-between items-center';
            item.innerHTML = `
                <div>
                    <span class="text-cyan-400 font-semibold">${type.toUpperCase()}</span>
                    <span class="text-gray-400 text-xs ml-2">${keyHistory[0].time}</span>
                    <div class="text-gray-500 text-xs font-mono mt-1">${maskedKey}</div>
                </div>
                <button onclick="recallKey(0)" class="text-cyan-400 hover:text-cyan-300 text-sm">
                    <i class="fa-solid fa-redo"></i>
                </button>
            `;
            
            historyDiv.insertBefore(item, historyDiv.firstChild);
            
            if (historyDiv.children.length > 10) {
                historyDiv.removeChild(historyDiv.lastChild);
            }
        }

        function recallKey(index) {
            const key = keyHistory[index].key;
            document.getElementById('generatedKey').value = key;
        }

        function clearHistory() {
            if (confirm('Clear all key history?')) {
                keyHistory.length = 0;
                document.getElementById('keyHistory').innerHTML = '<p class="text-gray-500 text-sm text-center py-4">No keys generated yet</p>';
            }
        }
    </script>
</body>
</html>