# papi-central

Minimal central activation service for PAPI apps.

Environment
- `REPO_API_KEY` (required) — the single repo API key generated by your key generator. Store securely (GitHub Secrets / server env).
- `SMTP_URL` (required) — SMTP connection string, e.g. `smtp://user:pass@smtp.example.com:587`.
- `EMAIL_FROM` (optional) — sender address for activation emails.

Run (development)
1. Ensure Node.js is installed.
2. Set environment variables and start:

```powershell
Set-Location 'C:\Users\troyw\Desktop\projects folder\papi-central'
$env:REPO_API_KEY = Get-Content -LiteralPath 'REPO_API_KEY.secret' -Raw
$env:SMTP_URL = 'smtp://user:pass@smtp.example.com:587'
node server.js
```

Admin quick-activation
- Use `/admin/activate` with header `x-repo-admin-key: <REPO_API_KEY>` and body `{ "email": "user@example.com", "appId": "APP_ID" }` to immediately generate a signed activation token.

Notes
- Tokens are HMAC-signed with `REPO_API_KEY` and checked by apps using `/check-token`.
- Do NOT commit `REPO_API_KEY.secret` — use the server's environment or GitHub Secrets in CI.
